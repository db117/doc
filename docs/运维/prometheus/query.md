---
title: 查询语法
---

## 基础操作

> **Prometheus的查询表达式可以分为四种数据类型：**
> **instant vector** 瞬时向量 - 它是指在同一时刻，抓取的所有度量指标数据。这些度量指标数据的key都是相同的，也即相同的时间戳；
> **range vector** 范围向量 - 它是指在任何一个时间范围内，抓取的所有度量指标数据；
> **scalar** 标量 - 一个简单的浮点值，标量浮点值可以直接写成形式；
> **string** 字符串 - 字符串可以用单引号、双引号或者反引号表示；

### 浮点文本

> 标量浮点值可以以文字整数或浮点数的格式写入

```
[-+]?(
      [0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?
    | 0[xX][0-9a-fA-F]+
    | [nN][aA][nN]
    | [iI][nN][fF]
)

23
-2.43
3.4e-9
0x8f
-Inf
NaN
```



#### 即时矢量选择器

> 即时向量选择器允许在给定的时间戳(即时)选择一组时间序列和每个时间戳的单个样本值: 在最简单的形式中，只指定一个指标名称。这将生成一个即时向量，其中包含具有此度量名称的所有时间序列的元素。

```
kube_pod_info{job="prometheus"}
# 选择标签 job="prometheus" name="kube_pod_info" 的数据
```

标签匹配符：

- =: 精确地匹配标签给定的值
- !=: 不等于给定的标签值
- =~: 选择匹配正则表达式的标签(或子标签)
- !~: 选择不匹配正则表达式的标签(或子标签)

```
# 选择了度量指标名称以jvm_开头的时间序列数据
{__name__ =~"jvm_.*"} 

# 选择给定环境的数据
jvm_classes_loaded{environment=~"staging|testing|development"}
```

