---
title: 位运算
---

#### 利用ASCII码与位运算异或进行大小写转换

> 大小写字母在ASCII码中差32(1<<5)

```
c^=1<<5
```

#### 计算数字中1的数量

```
int countOne(int n){
  int count = 0;
  while (n != 0){
    count++;
    n = (n-1) & n;// 去掉最右边一个1
  }
  return count;
}
```

#### 不用临时变量交换值

```
numbers[0] ^= numbers[1];
numbers[1] ^= numbers[0];
numbers[0] ^= numbers[1];
```

#### 最后一个1

```
num&-num
```

#### 去掉最右边一个1

```
n&(n-1)
```

#### 绝对值

```
(n ^ (n >> 31)) - (n >> 31)
n>0 则 n >> 31 = 0 ，即为 n^0-0
n<0 则 n >> 31 = -1 ,即为 n^-1 + 1 同 ~n+1 ，即补码
```

#### 符号

```
(n >> 31) | (~((~n + 1) >> 31) + 1)

(~n + 1) >> 31  					正数为 -1 ，负数为 0。
~((~n + 1) >> 31) 				取反后正数为 0 ，负数为 -1
(~((~n + 1) >> 31) + 1)		加一后正数为 1 ，负数为 0
(n >> 31) |								正数为 0，负数为 -1 和上一步进行或运算。则正数为 1，负数为 -1
```

#### 取最大值

```
int max(int a, int b){
    return (b & ((a - b) >> 31)) | (a & (~(a - b) >> 31));
}  
```

